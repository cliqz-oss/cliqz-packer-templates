{
  "variables": {
    "source_ami": ""
  },
  "builders": [{    
    "type": "amazon-ebs",
    "communicator": "winrm",
    "source_ami": "{{ user `source_ami`}}",
    "ami_name": "windows10_pr",
    "region": "us-east-1",
    "instance_type": "c4.xlarge",
    "winrm_username": "vagrant",
    "winrm_password": "vagrant",
    "winrm_timeout": "6h",
    "subnet_id": "subnet-361ff61d",
    "security_group_id": "sg-85b3e7f8",
    "user_data_file": "./ec2-userdata.ps1",
    "ssh_private_ip": true
  }],
  "provisioners": [
    {
    "type" : "windows-shell",
    "inline" : ["c:\\jenkins\\tools\\Git-2.10.0-32-bit.exe /VERYSILENT", "c:\\jenkins\\tools\\DXSDK_Jun10.exe /U", "C:\\jenkins\\tools\\go1.6.3.windows-amd64.msi /quiet /norestart", "c:\\jenkins\\tools\\jre-8u101-windows-x64.exe /s"]

  },
  {
    "type" : "powershell",
    "execute_command": "powershell -ExecutionPolicy Bypass \"& { {{.Vars}}{{.Path}}; exit $LastExitCode}\"",
    "scripts" : [
      "./extract-zip.ps1",
      "./install-vs.ps1",
      "./remove-installers.ps1",
      "./set-git-config.ps1",
      "./create-dirs.ps1"
    ]
  },
  {
     "type" : "windows-shell",
     "inline": "cd c:\\mozilla-build\\python & python -m pip install compare-locales"
  }
]  
}

